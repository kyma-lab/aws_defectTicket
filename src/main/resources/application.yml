server:
  port: 8060

spring:
  profiles:
    active: local
  application:
    name: defect-ticket-processor
  threads:
    virtual:
      enabled: true  # Java 21 Virtual Threads for better I/O performance
  ai:
    bedrock:
      aws:
        region: ${aws.region:us-east-1}
      anthropic:
        chat:
          enabled: true
          model: anthropic.claude-sonnet-4-5-20251024-v1:0
          options:
            temperature: 0.3
            max-tokens: 2048
  jackson:
    serialization:
      write-dates-as-timestamps: false
    default-property-inclusion: non_null

aws:
  region: us-east-1
  dynamodb:
    table-prefix: defect-tickets
  sqs:
    ingestion-queue-url: https://sqs.us-east-1.amazonaws.com/ACCOUNT_ID/defect-ticket-ingestion
  secrets:
    llm-api-key: /defect-ticket/llm-api-key
  stepfunctions:
    state-machine-arn: arn:aws:states:us-east-1:ACCOUNT_ID:stateMachine:TicketWorkflow

llm:
  provider: bedrock
  model-id: anthropic.claude-sonnet-4-5-20251024-v1:0
  confidence-threshold: 0.85
  max-retries: 3
  max-concurrency: 10  # Bedrock throttling protection

hitl:
  approval:
    timeout-hours: 24
    escalation-enabled: true
    track-divergence: true  # Track AI vs Human decisions

batch:
  max-concurrency: 10  # Step Functions Map State concurrency
  ttl-days: 90  # DynamoDB TTL for archived tickets

logging:
  level:
    com.client.defectticket: DEBUG
    software.amazon.awssdk: WARN
    org.springframework.ai: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
